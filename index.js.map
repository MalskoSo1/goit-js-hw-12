{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst pixabayApiKey = '53339801-8b3ce8e2b4688b576eb7bcf24';\nconst pixabayUrl = 'https://pixabay.com/api/';\nexport const perPage = 15;\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const pixabayParams = {\n      key: pixabayApiKey,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    };\n    const response = await axios.get(pixabayUrl, { params: pixabayParams });\n\n    return response.data;\n  } catch (err) {\n    iziToast.show({\n      message: `Error: ${err}`,\n      backgroundColor: '#ef4040',\n      messageColor: '#fafafb',\n      position: 'topRight',\n      progressBarColor: '#b51b1b',\n    });\n  }\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  widthRatio: 0.77,\n  heightRatio: 0.92,\n});\n\nconst refs = {\n  gallery: document.querySelector('#gallery'),\n};\n\nexport function createGallery(images) {\n  const galleryCardsTemplate = images\n    .map(imgInfo => createGalleryCardTemplate(imgInfo))\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  const btn = document.querySelector('.btn-load-more');\n\n  btn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  const btn = document.querySelector('.btn-load-more');\n\n  btn.classList.add('is-hidden');\n}\n\nfunction createGalleryCardTemplate(imgInfo) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-card\" href=\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\" width=\"360\" height=\"200\" src=\"${\n      imgInfo.webformatURL\n    }\" alt=\"${imgInfo.tags.split(',')[0]}\"/>\n  </a>\n    <ul class=\"img-descriptions-list\">\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Likes</p>\n        <p class=\"img-descriptions-data\">${imgInfo.likes}</p>\n      </li>\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Views</p>\n        <p class=\"img-descriptions-data\">${imgInfo.views}</p>\n      </li>\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Comments</p>\n        <p class=\"img-descriptions-data\">${imgInfo.comments}</p>\n      </li>\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Downloads</p>\n        <p class=\"img-descriptions-data\">${imgInfo.downloads}</p>\n      </li>\n    </ul>\n  </li>`;\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport { clearGallery } from './js/render-functions';\nimport { showLoader } from './js/render-functions';\nimport { hideLoader } from './js/render-functions';\nimport { showLoadMoreButton } from './js/render-functions';\nimport { hideLoadMoreButton } from './js/render-functions';\nimport { perPage } from './js/pixabay-api';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btnLoadMore: document.querySelector('.js-btn-load-more'),\n};\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet dataHits = 0;\n\n// Function when press button\nrefs.form.addEventListener('submit', async event => {\n  try {\n    event.preventDefault();\n\n    const input = refs.form.querySelector('input[name=\"search-text\"]');\n    const query = input.value.trim();\n\n    currentQuery = query;\n    currentPage = 1;\n    dataHits = 0;\n    // Check if input empty\n    if (query === '') {\n      input.value = '';\n      clearGallery();\n      hideLoadMoreButton();\n\n      iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        progressBarColor: '#b51b1b',\n      });\n\n      return;\n    }\n\n    hideLoadMoreButton();\n    clearGallery();\n    showLoader();\n\n    // Taking and rendering data from site\n    let data = await getImagesByQuery(query, currentPage);\n\n    if (data === undefined) {\n      hideLoader();\n      return;\n    }\n    dataHits = data.totalHits;\n    if (data.total === 0) {\n      input.value = '';\n    }\n\n    if (data.hits.length !== 0) {\n      checkResults(currentPage, dataHits);\n      createGallery(data.hits);\n    } else {\n      iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        progressBarColor: '#b51b1b',\n      });\n    }\n    hideLoader();\n  } catch (err) {\n    iziToast.show({\n      message: `Error: ${err}`,\n      backgroundColor: '#ef4040',\n      messageColor: '#fafafb',\n      position: 'topRight',\n      progressBarColor: '#b51b1b',\n    });\n  }\n});\n\n// event for button load more\nrefs.btnLoadMore.addEventListener('click', async event => {\n  try {\n    hideLoadMoreButton();\n    showLoader();\n    currentPage++;\n\n    // add img to gallery and page\n    let data = await getImagesByQuery(currentQuery, currentPage);\n    dataHits = data.totalHits;\n\n    if (data.hits.length !== 0) {\n      checkResults(currentPage, dataHits);\n      createGallery(data.hits);\n      scrollPage();\n    } else {\n      iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        progressBarColor: '#b51b1b',\n      });\n    }\n\n    hideLoader();\n  } catch (err) {\n    iziToast.show({\n      message: `Error: ${err}`,\n      backgroundColor: '#ef4040',\n      messageColor: '#fafafb',\n      position: 'topRight',\n      progressBarColor: '#b51b1b',\n    });\n  }\n});\n\n// function for check if data is empty or not and if there are no more results\nfunction checkResults(currentPage, dataHits) {\n  if (dataHits !== 0) {\n    showLoadMoreButton();\n    if (currentPage * perPage >= dataHits) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        progressBarColor: '#b51b1b',\n      });\n    }\n  }\n}\n\n// function for scroll when more img\nfunction scrollPage() {\n  const galleryCard = document.querySelector('.gallery-item');\n\n  if (!galleryCard) return;\n\n  const height = galleryCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["pixabayApiKey","pixabayUrl","perPage","getImagesByQuery","query","page","pixabayParams","axios","err","iziToast","lightbox","SimpleLightbox","refs","createGallery","images","galleryCardsTemplate","imgInfo","createGalleryCardTemplate","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","currentQuery","currentPage","dataHits","event","input","data","checkResults","scrollPage","galleryCard","height"],"mappings":"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"}