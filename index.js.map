{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nconst pixabayApiKey = '53339801-8b3ce8e2b4688b576eb7bcf24';\nconst pixabayUrl = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n  try {\n    const pixabayParams = {\n      key: pixabayApiKey,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    };\n    const response = await axios.get(pixabayUrl, { params: pixabayParams });\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        progressBarColor: '#b51b1b',\n      });\n    }\n    return response.data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  widthRatio: 0.77,\n  heightRatio: 0.92,\n});\n\nconst refs = {\n  gallery: document.querySelector('#gallery'),\n};\n\nexport function createGallery(images) {\n  const galleryCardsTemplate = images\n    .map(imgInfo => createGalleryCardTemplate(imgInfo))\n    .join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  refs.gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  const btn = document.querySelector('.btn-load-more');\n\n  btn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  const btn = document.querySelector('.btn-load-more');\n\n  btn.classList.add('is-hidden');\n}\n\nfunction createGalleryCardTemplate(imgInfo) {\n  return `<li class=\"gallery-item\">\n    <a class=\"gallery-card\" href=\"${imgInfo.largeImageURL}\">\n    <img class=\"gallery-img\" width=\"360\" height=\"200\" src=\"${\n      imgInfo.webformatURL\n    }\" alt=\"${imgInfo.tags.split(',')[0]}\"/>\n  </a>\n    <ul class=\"img-descriptions-list\">\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Likes</p>\n        <p class=\"img-descriptions-data\">${imgInfo.likes}</p>\n      </li>\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Views</p>\n        <p class=\"img-descriptions-data\">${imgInfo.views}</p>\n      </li>\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Comments</p>\n        <p class=\"img-descriptions-data\">${imgInfo.comments}</p>\n      </li>\n      <li class=\"img-descriptions-item\">\n        <p class=\"img-descriptions-text\">Downloads</p>\n        <p class=\"img-descriptions-data\">${imgInfo.downloads}</p>\n      </li>\n    </ul>\n  </li>`;\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport { clearGallery } from './js/render-functions';\nimport { showLoader } from './js/render-functions';\nimport { hideLoader } from './js/render-functions';\nimport { showLoadMoreButton } from './js/render-functions';\nimport { hideLoadMoreButton } from './js/render-functions';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  btnLoadMore: document.querySelector('.js-btn-load-more'),\n};\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet dataHits = 0;\n\n// Function when press button\nrefs.form.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const input = refs.form.querySelector('input[name=\"search-text\"]');\n  const query = input.value.trim();\n\n  // Check if input empty\n  if (query === '') {\n    input.value = '';\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  dataHits = 0;\n\n  clearGallery();\n\n  showLoader();\n\n  // Taking and rendering data from site\n  try {\n    let data = await getImagesByQuery(query, currentPage);\n\n    dataHits = data.totalHits;\n\n    createGallery(data.hits);\n    checkResults(currentPage, dataHits);\n  } catch (err) {\n    console.log(err);\n  }\n  hideLoader();\n});\n\n// event for button load more\nrefs.btnLoadMore.addEventListener('click', async event => {\n  try {\n    showLoader();\n    currentPage++;\n\n    // add img to gallery and page\n    let data = await getImagesByQuery(currentQuery, currentPage);\n\n    checkResults(currentPage, dataHits);\n    createGallery(data.hits);\n    scrollPage();\n\n    hideLoader();\n  } catch (error) {\n    console.log(error);\n  }\n});\n\n// function for check if data is empty or not and if there are no more results\nfunction checkResults(currentPage, dataHits) {\n  if (dataHits !== 0) {\n    showLoadMoreButton();\n    if (currentPage * 15 >= dataHits) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        position: 'topRight',\n        progressBarColor: '#b51b1b',\n      });\n    }\n  }\n}\n\n// function for scroll when more img\nfunction scrollPage() {\n  const twoHeight = 492;\n  document.body.getBoundingClientRect();\n  window.scrollBy({\n    top: twoHeight,\n    // left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["pixabayApiKey","pixabayUrl","getImagesByQuery","query","page","pixabayParams","response","axios","iziToast","err","lightbox","SimpleLightbox","refs","createGallery","images","galleryCardsTemplate","imgInfo","createGalleryCardTemplate","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","currentQuery","currentPage","dataHits","event","input","data","checkResults","scrollPage","error"],"mappings":"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"}